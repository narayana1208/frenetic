OASISFormat: 0.3
OCamlVersion: >= 4.01.0
Name:        frenetic
Version:     1.0.2
Synopsis:    The Frenetic Compiler and Runtime System
Authors:     Nate Foster, Arjun Guha, Mark Reitblatt, Cole Schlesinger, and
             David Walker
License:     LGPL
Plugins:     META (0.3), StdFiles (0.3), DevFiles (0.3)
BuildTools:
  ocamlbuild,
  ocamldoc

XStdFilesREADME: False
XStdFilesAUTHORS: False

Flag installexec
  Description: install the Frenetic executable
  Default: False

Flag quickcheck
  Description: build the frenetic.quickcheck library
  Default: False

Flag lwt
  Description: build things that rely on lwt
  Default: False

Library netcore
  Path: lib
  BuildDepends:
    cstruct,
    dprle,
    core,
    sexplib,
    sexplib.syntax,
    lwt,
    lwt.syntax,
    lwt.syntax.log,
    lwt.unix,
    str,
    ocamlgraph,
    openflow,
    openflow.lwt,
    threads,
    packet,
    topology
  InternalModules:
    Types,
    Lexer,
    Parser,
    Pretty,
    Semantics,
    LocalCompiler,
    NetKAT_Automaton,
    PolicyGenerator
  Modules:
    Util

Library lwt
  Findlibparent: netcore
  Findlibname: lwt
  Path: lib
  Build$: flag(lwt)
  BuildDepends:
    cstruct,
    dprle,
    core,
    sexplib,
    sexplib.syntax,
    lwt,
    lwt.syntax,
    lwt.syntax.log,
    lwt.unix,
    str,
    ocamlgraph,
    openflow,
    openflow.lwt,
    threads,
    packet,
    topology,
    netcore
  InternalModules:
    Controller
  Modules:
    NetKAT_Stream

Library quickcheck
  Findlibparent: netcore
  Findlibname: quickcheck
  Path: quickcheck
  Build$: flag(quickcheck)
  BuildDepends:
    quickcheck,
    netcore
  Modules:
    NetKAT_Arbitrary

Executable testtool
  Path: test
  MainIs: Test.ml
  Build$: flag(quickcheck) && flag(tests)
  BuildDepends: 
    oUnit,packet,
    netcore,
    pa_ounit,
    pa_ounit.syntax,
    quickcheck,
    netcore.quickcheck
  Install: False

Test all_tests
  Command: $testtool inline-test-runner netkat
  Run$: flag(tests)
  TestTools: testtool

Executable katnetic
  Path: frenetic
  CompiledObject: best
  MainIs: katnetic.ml
  Install$: flag(installexec)
  Build$: flag(lwt)
  BuildDepends:
    lwt,
    lwt.syntax,
    netcore,
    netcore.lwt

Executable netkat_test
  Path: frenetic
  MainIs: netkat_test.ml
  Install$: flag(installexec)
  Build$: flag(lwt)
  BuildDepends:
    lwt,
    lwt.syntax,
    netcore,
    netcore.lwt

Executable distfrenetic
  Path: frenetic
  CompiledObject: best
  MainIs: DistributedCompiler.ml
  Install: False
  BuildDepends:
    netcore,
    core,
    threads,
    yojson,
    async,
    async_parallel,
    cohttp,
    cohttp.async

Executable disttest
  Path: frenetic
  CompiledObject: best
  MainIs: ParTest.ml
  Install: False
  BuildDepends:
    core,
    threads,
    yojson,
    async,
    async_parallel
